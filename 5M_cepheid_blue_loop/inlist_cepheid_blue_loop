! inlist_cepheid_blue_loop
!
! MESA Colors Demo: Blue Loop Chromatic Evolution
! ================================================
! 5 Msun star during core He burning blue loop.
! Teff changes ~2000 K at nearly constant L.
! Tests atmosphere interpolation across wide Teff range.
!

&star_job

   show_log_description_at_start = .false.

   load_saved_model = .true.
   load_model_filename = 'start.mod'

   save_model_when_terminate = .true.
   save_model_filename = 'final.mod'
   required_termination_code_string = 'star_species_mass_min_limit'

   initial_zfracs = 6

/ ! end of star_job namelist


&eos
/ ! end of eos namelist


&kap
   Zbase = 0.008
   use_Type2_opacities = .true.
   kap_file_prefix = 'a09'
   kap_lowT_prefix = 'lowT_fa05_a09p'
   kap_CO_prefix = 'a09_co'
/ ! end of kap namelist


&controls
   
   initial_mass = 5
   initial_Y = 0.256d0
   initial_Z = 0.008d0

   ! Numerics
   max_model_number = 6000
   energy_eqn_option = 'dedt'
   use_gold2_tolerances = .true.

   ! Convection
   mixing_length_alpha = 1.8d0
   MLT_option = 'TDC'
   use_Ledoux_criterion = .true.
   alpha_semiconvection = 0.1
   make_gradr_sticky_in_solver_iters = .true.

   ! Overshoot
   overshoot_scheme(1) = 'exponential'
   overshoot_zone_type(1) = 'burn_H'
   overshoot_zone_loc(1) = 'core'
   overshoot_bdy_loc(1) = 'top'
   overshoot_f(1) = 0.012
   overshoot_f0(1) = 0.002

   overshoot_scheme(2) = 'exponential'
   overshoot_zone_type(2) = 'nonburn'
   overshoot_zone_loc(2) = 'shell'
   overshoot_bdy_loc(2) = 'bottom'
   overshoot_f(2) = 0.022
   overshoot_f0(2) = 0.002

   ! Predictive mixing
   predictive_mix(1) = .true.
   predictive_zone_type(1) = 'any'
   predictive_zone_loc(1) = 'core' 
   predictive_bdy_loc(1) = 'any'
   predictive_superad_thresh(1) = 0.01
   predictive_avoid_reversal(1) = 'he4'

   predictive_mix(2) = .true.
   predictive_zone_type(2) = 'any'
   predictive_zone_loc(2) = 'surf' 
   predictive_bdy_loc(2) = 'any'

   ! Timestep — capture HR evolution for Colors
   delta_HR_limit = 0.002

   ! Termination: end when He exhausted
   xa_central_lower_limit_species(1) = 'he4'
   xa_central_lower_limit(1) = 1d-4

   ! Output — dense sampling for Colors demonstration
   photo_interval = 50
   profile_interval = 50
   history_interval = 1   ! Every timestep for smooth CMD tracks
   terminal_interval = 10

/ ! end of controls namelist


&colors

   use_colors = .true.

   ! Atmosphere grid
   stellar_atm = '/data/colors_data/stellar_models/Kurucz2003all/'

   ! Filter set — LSST for survey-era demonstration
   instrument = '/data/colors_data/filters/LSST/LSST'

   ! Distance: 10 pc for absolute magnitudes
   distance = 3.0857d19

   ! AB system for LSST
   mag_system = 'AB'

   ! Diagnostics
   colors_results_directory = 'COLORS_OUTPUT'
   make_csv = .false.

/ ! end of colors namelist


&pgstar

   pgstar_interval = 10
   
   ! HR diagram to watch blue loop
   HR_win_flag = .true.
   HR_win_width = 8
   HR_win_aspect_ratio = 0.62

   HR_logT_min = 3.6
   HR_logT_max = 3.95
   HR_logL_min = 2.99
   HR_logL_max = 3.4

   show_HR_classical_instability_strip = .true.

/ ! end of pgstar namelist
